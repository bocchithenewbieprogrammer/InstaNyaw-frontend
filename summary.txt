Nice â€” Iâ€™ll pull everything together from the code and conversation you shared and give you a single, detailed, useful summary you can copy to the new chat. Iâ€™ve reconstructed this from the files and messages you gave me (Homepage.html / Homepage.js, User model, birthdayController, auth controllers/routes, and dev debug comments). Where I had to infer something Iâ€™ll say so â€” I wonâ€™t invent commit history or files I havenâ€™t seen.

InstaNyaw â€” Full project summary (reconstructed)

Source: your conversation and code snippets you pasted (Homepage.html, Homepage.js, User.js, birthdayController.js, authController, authRoutes, auth.js, multiple frontend JS versions).
If you want a perfect full dump, upload the rest of backend files (server/app entry, other controllers/models, middleware, package.json, .env, any views). But this summary is a complete, practical starting point.

â¸»

1) Project overview (what InstaNyaw is)
	â€¢	InstaNyaw is a school/institution-limited social platform (a mini social network) for La Consolacion University Philippines (LCUP) students & employees.
	â€¢	Key features implemented:
	â€¢	Home feed that aggregates different post types (Birthday Greetings, Annoucements, School News, Lost & Found).
	â€¢	CRUD endpoints for Birthdays, Announcements, News, Lost & Found.
	â€¢	Authentication (register/login) with JWT.
	â€¢	Role-based user model (student, employee, admin), though you had issues toggling admin behavior.
	â€¢	File/image uploads are handled client-side as Base64 (converted with FileReader and sent in JSON).
	â€¢	Profile/avatar for users (avatar stored as string URL or base64).
	â€¢	Simple UI: single-page-like behavior with changePage that swaps center content.
	â€¢	Backend runs locally (you used localhost:5000 in fetches). DB is MongoDB (you used Compass, saw ECONNREFUSED then fixed it).

â¸»

2) Tech stack & dev tools used

Backend
	â€¢	Node.js + Express
	â€¢	Mongoose (MongoDB ODM)
	â€¢	MongoDB (local; you used MongoDB Compass to inspect DB)
	â€¢	bcryptjs (password hashing)
	â€¢	jsonwebtoken (JWT tokens)
	â€¢	dotenv for configs (inferred)
	â€¢	Typical project structure (inferred) with controllers, models, routes, middleware

Frontend
	â€¢	Vanilla HTML / CSS / JavaScript
	â€¢	Font Awesome icons
	â€¢	Browser fetch() for calling APIs
	â€¢	FileReader API to convert images to base64 and preview them
	â€¢	localStorage to store JWT token and user object returned on login

Dev environment
	â€¢	Windows 10 (you said)
	â€¢	Visual Studio 2022 was referenced previously (but likely you use VS Code or Visual Studio â€” you mentioned Visual Studio 2022 in conversation)
	â€¢	MongoDB Compass for DB admin
	â€¢	You run server locally (services.msc to start mongo service earlier, as you asked about)

â¸»

3) Reconstructed folder layout (suggested / inferred)

instanyaw/
â”œâ”€ backend/
â”‚  â”œâ”€ models/
â”‚  â”‚  â”œâ”€ User.js
â”‚  â”‚  â”œâ”€ BirthdayGreeting.js
â”‚  â”‚  â”œâ”€ Announcement.js
â”‚  â”‚  â”œâ”€ News.js
â”‚  â”‚  â””â”€ LostFound.js
â”‚  â”œâ”€ controllers/
â”‚  â”‚  â”œâ”€ authController.js
â”‚  â”‚  â”œâ”€ birthdayController.js
â”‚  â”‚  â”œâ”€ announcementsController.js
â”‚  â”‚  â”œâ”€ newsController.js
â”‚  â”‚  â””â”€ lostFoundController.js
â”‚  â”œâ”€ routes/
â”‚  â”‚  â”œâ”€ authRoutes.js
â”‚  â”‚  â”œâ”€ birthdayRoutes.js
â”‚  â”‚  â”œâ”€ announcementsRoutes.js
â”‚  â”‚  â”œâ”€ newsRoutes.js
â”‚  â”‚  â””â”€ lostFoundRoutes.js
â”‚  â”œâ”€ middleware/
â”‚  â”‚  â””â”€ authMiddleware.js
â”‚  â”œâ”€ server.js (or app.js / index.js)
â”‚  â””â”€ package.json
â””â”€ frontend/
   â”œâ”€ public/
   â”‚  â””â”€ images/  (icons, default avatar)
   â”œâ”€ Homepage.html
   â”œâ”€ Homepage.css
   â””â”€ Homepage.js

	â€¢	Note: Some files you provided appear duplicated (authController + auth.js). Keep only one auth implementation to avoid route collision.

â¸»

4) Important models (what you provided / inferred)

User (you provided User.js)

const userSchema = new mongoose.Schema({
  username: { type: String, required: true, unique: true, trim: true },
  email: { type: String, required: true, unique: true, lowercase: true, trim: true },
  password: { type: String, required: true, minlength: 6 },
  bio: { type: String, default: "" },
  avatar: { type: String, default: "" }, // stores image url or base64
  role: { type: String, enum: ["student","employee","admin"], default: "student" },
  isBanned: { type: Boolean, default: false },
  createdAt: { type: Date, default: Date.now }
});

	â€¢	Password hashing handled in pre("save").
	â€¢	matchPassword method present.

BirthdayGreeting (inferred, used in controller)
	â€¢	Fields used in controller:
	â€¢	recipient (ObjectId -> User)
	â€¢	message (String)
	â€¢	image (String â€” base64 or url)
	â€¢	createdBy (ObjectId -> User)
	â€¢	createdAt (Date)
	â€¢	Example Mongoose schema would populate recipient and createdBy.

Other models (inferred)
	â€¢	Announcement likely: title, content, createdBy, createdAt, image?
	â€¢	News: title, content, createdBy, createdAt, image?
	â€¢	LostFound: title, description, status, image, user, createdAt

â¸»

5) Backend controllers & routes (what exists and important behaviour)

Auth
	â€¢	authController.js (you shared): register, login, logout, getProfile.
	â€¢	Login issues resolved by searching with email OR username.
	â€¢	Login returns { token, user: { id, username, email, role } }.
	â€¢	getProfile uses protect middleware to pull req.user.id.
	â€¢	authRoutes.js you shared registers POST /register, POST /login, POST /logout, GET /profile (protected).
	â€¢	Another file auth.js (route) duplicates register/login â€” be careful: only one router should be mounted in server to avoid duplication.

Birthday controller (you shared)
	â€¢	createGreeting(req, res):
	â€¢	Accepts { recipientUsername, message, image } in req.body.
	â€¢	Finds recipient by username, creates BirthdayGreeting with recipient, message, image, createdBy: req.user._id.
	â€¢	getGreetings(req, res):
	â€¢	Fetches greetings and .populate('recipient','username').populate('createdBy','username') then sorts.

Other controllers (inferred)
	â€¢	announcementsController, newsController, lostFoundController should implement analogous create/get endpoints. Your frontend expects these endpoints:
	â€¢	GET /api/birthdays
	â€¢	POST /api/birthdays
	â€¢	GET /api/announcements
	â€¢	POST /api/announcements
	â€¢	GET /api/news
	â€¢	POST /api/news
	â€¢	GET /api/lostfound
	â€¢	POST /api/lostfound

â¸»

6) Frontend (what you gave)

Files present
	â€¢	Homepage.html â€” main single-page layout, nav, left menu, main center, create-post modal.
	â€¢	Homepage.css (not provided, but referenced).
	â€¢	Homepage.js â€” large script controlling UI, changing pages and calling backend APIs.

Key frontend behavior
	â€¢	changePage(title, content, showPostBox) used to dynamically change center content.
	â€¢	Each tab (Birthday, News, Announcements, Lost & Found) sets inner HTML with form + feed container and attaches event listeners.
	â€¢	Feed load functions:
	â€¢	loadBirthdayGreetings() calls /api/birthdays and renders entries.
	â€¢	Similarly loadAnnouncements(), loadSchoolNews(), loadLostItems() call respective endpoints.
	â€¢	Home feed aggregates all posts via loadHomeFeed() which fetches the four endpoints and merges + sorts by createdAt, then uses renderPostHTML to render each post type with avatars and usernames.
	â€¢	Image upload: frontend converts images to base64 via FileReader and sends in JSON body (e.g., body: JSON.stringify({ title, content, image })).
	â€¢	Auth token handling:
	â€¢	localStorage.getItem('token') used for Authorization header Bearer ${token}.

Known frontend issues observed from conversation
	â€¢	Duplicate IDs across different dynamic pages â€” you asked to â€œfix IDsâ€.
	â€¢	At one point announcements were admin-only; you rolled back to allow all users.
	â€¢	Birthday greeting modal and the post-btn were wired via a generic document click handler; previously birthday button â€œdidnâ€™t workâ€ until rework.
	â€¢	You asked to display avatar + username in header and have username clickable to profile â€” code needs to call GET /api/auth/profile to populate header.
	â€¢	You requested swapping order: username first then avatar. (You later asked to switch positions â€” will be a small DOM change.)
	â€¢	Image upload not working in birthday greetings â€” probable causes:
	â€¢	Server-side controller may expect createdBy from req.user (so request must be authenticated and protect middleware must set req.user).
	â€¢	If client sends base64 under wrong field name or too large payload, server might reject.
	â€¢	Duplicate route files or incorrect route mounting could cause requests to hit wrong handler.
	â€¢	Need to verify frontend element IDs and event hookup for birthday upload (you added a global .post-btn handler â€” ensure correct ids and modal element presence).
	â€¢	You had localhost:27017 connection issues earlier (Mongo service not started) â€” fixed by starting the MongoDB service.

â¸»

7) API contract / request + response shapes (what frontend expects)

Authentication
	â€¢	POST /api/auth/login -> request { email | username, password }
response:

{
  "token": "<jwt>",
  "user": { "id": "...", "username":"...", "email":"...", "role":"student" }
}

	â€¢	GET /api/auth/profile (protected) -> returns user document minus password:

{ "_id": "...", "username": "...", "email": "...", "avatar": "...", "role": "...", ... }

Birthday
	â€¢	GET /api/birthdays returns array of greetings, each populated:

[ { "_id":"...", "recipient": {"_id":"..","username":".."}, "message":"...", "image":"data:...","createdBy": {"_id":"..","username":".."}, "createdAt":"..." }, ... ]

	â€¢	POST /api/birthdays body:

{ "recipientUsername": "someuser", "message": "Happy!", "image": "data:image/..." }

	â€¢	Server uses req.user._id as createdBy (so protect middleware required).

Announcements / News / LostFound
	â€¢	Similar shapes â€” createdBy/createdAt fields populated; image optional.

â¸»

ðŸ˜Ž Common problems I noticed (and fixes)
	1.	Duplicate auth route files (authController vs auth.js)
	â€¢	Keep a single routes file and single controller. Mount it once in server.js. Duplicate routes can cause confusing behavior.
	2.	Admin role not reflecting UI
	â€¢	You changed role in MongoDB Compass but UI still didnâ€™t show announcement button. Likely reasons:
	â€¢	UI checks user from localStorage, not from DB. Ensure after changing role you re-login or update localStorage.user.
	â€¢	Server may require server-side role-check in route; ensure protect + authorize('admin') middleware is implemented if admin-only.
	â€¢	The button visibility is controlled in frontendâ€”check logic that hides/shows the announcement post box.
	3.	Image upload failing (Birthday)
	â€¢	Check:
	â€¢	Is client including Authorization header with token? createBirthday uses Authorization: Bearer ${token}.
	â€¢	Does backend accept large JSON bodies? If base64 images are large you must increase express.json({ limit: '10mb' }).
	â€¢	Is req.body.image being saved correctly in Mongoose schema? If schema field name differs (e.g., imageUrl vs image), mismatch causes empty field.
	â€¢	Are there frontend ID mismatches (e.g., fileInput vs file_input) so file isnâ€™t read?
	â€¢	Likely solution: increase body parser limit and verify field names.
	4.	ID collisions in dynamic pages
	â€¢	Since changePage injects HTML with same IDs for different pages, you must ensure event listeners are attached after the new DOM is inserted (you already do this in places). Also avoid having duplicate global document.getElementById("lostBtn") listeners set multiple times â€” use removeEventListener or set listeners once on static nav.
	5.	Header avatar + username
	â€¢	Implement GET /api/auth/profile on page load (or on login) and populate header elements:
	â€¢	document.getElementById('profileIcon').src = profile.avatar || default
	â€¢	document.getElementById('profileName').textContent = profile.username
	â€¢	Add hover CSS for color change and clickable link to profile page.
	6.	Home feed shows avatars:
	â€¢	Your loadHomeFeed() merges posts, but some post objects use different nested fields:
	â€¢	birthdays use author or createdBy?
	â€¢	lostfound uses user
	â€¢	Make sure backend populate() returns consistent property names or adapt frontend rendering to check multiple fields (you already do with post.createdBy?.avatar || post.author?.avatar || post.user?.avatar if needed).

â¸»

9) Security & performance recommendations
	â€¢	Do not store large images as base64 in DB â€” store files on S3 or disk and save URLs in DB. Base64 in DB increases DB size and slows responses.
	â€¢	Increase body parser limit if you keep base64 approach: in server.js:

app.use(express.json({ limit: '10mb' }));
app.use(express.urlencoded({ limit: '10mb', extended: true }));

	â€¢	Validate inputs server-side (title length, allowed image types).
	â€¢	Protect routes: ensure create endpoints require protect middleware and check roles if required.
	â€¢	Avoid multiple route duplicates and keep consistent naming (createdBy vs author vs user).

â¸»

10) Where we left off (from your convo) â€” what you wanted next
	â€¢	Make header show the logged-in userâ€™s avatar + username (username clickable -> profile, hover color change). You already asked to swap positions (username then avatar). I can provide the small HTML/JS/CSS change.
	â€¢	Fix birthday image upload â€” I listed likely causes above. To finish I need:
	â€¢	server.js (to inspect express.json() limits and route mounting)
	â€¢	birthday model (BirthdayGreeting.js) to confirm field names
	â€¢	birthdays route file (to confirm middlewares & controller usage)
	â€¢	Any error logs from server when upload fails (stack trace)
	â€¢	You also asked feed aggregated posts to appear in Homepage feed â€” your loadHomeFeed() is implemented; ensure itâ€™s called on page load (it is) and homeFeed element exists in DOM. You already added <div id="homeFeed"> in changePage() when Home loads.

â¸»

11) Quick actionable checklist I recommend you run now (so you can copy to the new chat)
	1.	Send me these backend files (or paste):
	â€¢	server.js (or app.js) â€” to check body-parser limits and route mounting.
	â€¢	BirthdayGreeting.js model file.
	â€¢	birthdays route file.
	â€¢	Any middleware authMiddleware.js.
	â€¢	package.json (to list installed packages).
	â€¢	If available, the announcements, news, lostFound model/controller files.
	2.	On your server, check logs when you attempt to create a birthday with an image:
	â€¢	Look at server console for JSON parsing errors or payload size errors.
	â€¢	If you saw PayloadTooLargeError, increase express.json({ limit: '...' }).
	3.	To add header avatar + username (frontend):
	â€¢	Add HTML placeholders in nav (in Homepage.html):

<div class="profile-display" id="profileDisplay">
  <span id="headerUsername" class="header-username">Username</span>
  <img id="headerAvatar" class="header-avatar" src="final_icon-removebg-preview.png" alt="avatar">
</div>

	â€¢	Add CSS for hover & clickable style:

.profile-display { cursor: pointer; display:flex; align-items:center; gap:8px; }
.header-username { transition: color .15s; }
.profile-display:hover .header-username { color: #1a73e8; } /* example color */
.header-avatar { width:36px; height:36px; border-radius:50%; object-fit:cover; }

	â€¢	On load (Homepage.js):

async function populateHeader() {
  const token = localStorage.getItem('token');
  if (!token) return;
  try {
    const res = await fetch('/api/auth/profile', { headers: { Authorization: Bearer ${token} }});
    if (!res.ok) return;
    const user = await res.json();
    document.getElementById('headerUsername').textContent = user.username;
    document.getElementById('headerAvatar').src = user.avatar || 'final_icon-removebg-preview.png';

    // make clickable
    document.getElementById('profileDisplay').addEventListener('click', () => {
      window.location.href = '/Profile/profile.html';
    });
  } catch (err) { console.error(err); }
}
window.addEventListener('DOMContentLoaded', populateHeader);

	4.	Fix birthday image upload:
	â€¢	Confirm that the frontend POST /api/birthdays sends { recipientUsername, message, image } and includes the Authorization header.
	â€¢	Confirm backend express.json({ limit: '10mb' }) is set.
	â€¢	Confirm BirthdayGreeting schema has image field and the controller saves req.body.image.

â¸»

12) Known code inconsistencies found (things to clean)
	â€¢	Many repeated blocks in Homepage.js (multiple definitions of same function or duplicate listeners). Consolidate to one file version â€” remove old copies.
	â€¢	Use consistent field names across your API responses: use either createdBy everywhere or author.
	â€¢	Make sure loadHomeFeed() uses the same populated property names that controllers return.
	â€¢	Ensure only one auth route file is mounted (remove duplicate auth.js if you use authController + authRoutes).

â¸»

13) What I can do next in the new chat (concrete next steps I can implement for you)
	â€¢	Fix header UI (swap username/avatar, add hover + click) â€” I can give exact HTML/CSS/JS patch.
	â€¢	Fix birthdays image upload end-to-end â€” but I need the backend files listed in checklist (server.js, BirthdayGreeting model, birthdays route).
	â€¢	Clean and de-duplicate Homepage.js (I can provide a cleaned, consolidated version).
	â€¢	Add server-side validation and bodyParser increase to allow images.
	â€¢	Add secure file storage suggestion (S3 or local uploads with multer) and sample code to switch from base64 to file upload.

â¸»

14) Final notes & honesty
	â€¢	This summary is built from the code snippets and conversation you posted. I did not inspect any files beyond what you pasted â€” if anything in your repo differs from the snippets, tell me or paste the files and Iâ€™ll update the summary or produce exact patches.
	â€¢	You said youâ€™ll move to a new chat because this one reached the limit â€” perfect. Before you do, copy the checklist (section 11) and upload those backend files to the new chat so I can finish the fixes (especially server.js, BirthdayGreeting.js, and your route/middleware files).

â¸»

If you want, Iâ€™ll:
	1.	Produce a cleaned Homepage.js (single-file, deduped) and mark the lines where you must add ids for the header avatar/username.
	2.	Produce the small header HTML + CSS + JS patch I described (ready to paste).
	3.	Or start by fixing the birthday image upload â€” but for that Iâ€™ll need the backend server.js, BirthdayGreeting model, and the birthdays route/controller files.